---
layout: post
title: US Food Analysis
subtitle: Testing Jupyter Notebook to Markdown
cover-img: /assets/img/cropbanner.jpg
thumbnail-img: /assets/img/USDAthumbnail.jpg
share-img: /assets/img/cropbanner.jpg
gh-repo: DovarFalcone/usfood
gh-badge: [star, fork, follow]
tags: [test]
comments: true
---

I used `jupyter nbconvert --to markdown notebook.ipynb` to conver a Jupyter Notebook to Markdown.
The generated markdown was then copy and pasted into this post.

```python
import pyodbc
import pandas as pd
import os
import json
import yaml
```


```python
with open('creds.yaml', 'r') as file:
   creds = yaml.safe_load(file)
```


```python
server = creds['usfoodcon']['server'] 
database = creds['usfoodcon']['database'] 
username = creds['usfoodcon']['username'] 
password = creds['usfoodcon']['password']  
cnxn = pyodbc.connect('DRIVER={PostgreSQL Unicode};SERVER='+server+';DATABASE='+database+';UID='+username+';PWD='+ password)
cursor = cnxn.cursor()
```


```python

# select 26 rows from SQL table to insert in dataframe.
query = '''SELECT "Country"
, "Commodity"
, "UOM"
, "Category"
, "FoodValue"
, "FoodValue" * 1000000 as "DollarValue"
, "YearNum"

FROM us_food_imports
where "Country" NOT IN (
	'REST OF WORLD',
	'WORLD (Quantity)',
	'WORLD'	
)
and (
	"Category" ILIKE 'Meats'
	or "Category" ILIKE 'Animals'
)
and "YearNum" = 2021
order by "Country"
;
'''
```


```python
df = pd.read_sql(query, cnxn)
print(df.head(26))
```

                 Country                          Commodity        UOM Category  \
    0          AUSTRALIA         Frozen red meats and parts  Million $    Meats   
    1          AUSTRALIA         Fresh or chilled red meats  Million $    Meats   
    2          AUSTRALIA  Total red meats, fresh and frozen  Million $    Meats   
    3             BRAZIL  Total red meats, fresh and frozen  Million $    Meats   
    4             BRAZIL                     Prepared meats  Million $    Meats   
    5             BRAZIL         Frozen red meats and parts  Million $    Meats   
    6             CANADA                          Bird eggs  Million $  Animals   
    7             CANADA                     Prepared meats  Million $    Meats   
    8             CANADA               Fowl and other meats  Million $    Meats   
    9             CANADA  Total red meats, fresh and frozen  Million $    Meats   
    10            CANADA         Fresh or chilled red meats  Million $    Meats   
    11            CANADA                 Total live animals  Million $  Animals   
    12            CANADA               Bovine animals, live  Million $  Animals   
    13            CANADA                        Swine, live  Million $  Animals   
    14            CANADA              Sheep and goats, live  Million $  Animals   
    15            CANADA                       Live poultry  Million $  Animals   
    16            CANADA         Frozen red meats and parts  Million $    Meats   
    17             CHILE               Fowl and other meats  Million $    Meats   
    18  CHINA (MAINLAND)               Fowl and other meats  Million $    Meats   
    19  CHINA (MAINLAND)                          Bird eggs  Million $  Animals   
    20            FRANCE                          Bird eggs  Million $  Animals   
    21             ITALY                     Prepared meats  Million $    Meats   
    22             JAPAN         Fresh or chilled red meats  Million $    Meats   
    23            MEXICO         Fresh or chilled red meats  Million $    Meats   
    24            MEXICO               Bovine animals, live  Million $  Animals   
    25            MEXICO  Total red meats, fresh and frozen  Million $    Meats   
    
        FoodValue   DollarValue  YearNum  
    0       650.4  6.504000e+08     2021  
    1       649.3  6.493000e+08     2021  
    2      2304.1  2.304100e+09     2021  
    3       365.0  3.650000e+08     2021  
    4       496.2  4.962000e+08     2021  
    5       355.5  3.555000e+08     2021  
    6        46.2  4.620000e+07     2021  
    7       653.4  6.534000e+08     2021  
    8       125.3  1.253000e+08     2021  
    9      3495.2  3.495200e+09     2021  
    10     3090.7  3.090700e+09     2021  
    11     1449.8  1.449800e+09     2021  
    12      861.8  8.618000e+08     2021  
    13      549.4  5.494000e+08     2021  
    14        1.5  1.500000e+06     2021  
    15       37.0  3.700000e+07     2021  
    16      402.5  4.025000e+08     2021  
    17      249.3  2.493000e+08     2021  
    18        7.8  7.800000e+06     2021  
    19        6.0  6.000000e+06     2021  
    20        3.2  3.200000e+06     2021  
    21      197.0  1.970000e+08     2021  
    22       86.8  8.680000e+07     2021  
    23     1789.8  1.789800e+09     2021  
    24      754.5  7.545000e+08     2021  
    25     2091.8  2.091800e+09     2021  

```python
cursor.close()
cnxn.close()  
```
